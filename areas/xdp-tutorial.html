<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Project management for XDP-tutorial</title>
<meta name="generator" content="Org mode" />
<link rel="stylesheet" type="text/css" href="/styles/bigblow/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="/styles/bigblow/css/bigblow.css"/>
<link rel="stylesheet" type="text/css" href="/styles/bigblow/css/hideshow.css"/>
<script type="text/javascript" src="/styles/bigblow/js/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="/styles/bigblow/js/jquery-ui-1.10.2.min.js"></script>
<script type="text/javascript" src="/styles/bigblow/js/jquery.localscroll-min.js"></script>
<script type="text/javascript" src="/styles/bigblow/js/jquery.scrollTo-1.4.3.1-min.js"></script>
<script type="text/javascript" src="/styles/bigblow/js/jquery.zclip.min.js"></script>
<script type="text/javascript" src="/styles/bigblow/js/bigblow.js"></script>
<script type="text/javascript" src="/styles/bigblow/js/hideshow.js"></script>
<script type="text/javascript" src="/styles/lib/js/jquery.stickytableheaders.min.js"></script>
</head>
<body>
<div id="content">
<h1 class="title">Project management for XDP-tutorial</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#Important-medium-term-tasks">Important medium-term tasks&#xa0;&#xa0;&#xa0;<span class="tag"><span class="_medium">@medium</span></span></a>
<ul>
<li><a href="#XDP-tutorial-ideas-for-assignments-examples"><span class="todo TODO">TODO</span> XDP-tutorial ideas for assignments/examples</a>
<ul>
<li><a href="#xdp-tutorial--rebase-libbpf-to-get-AF_XDP-headers"><span class="done DONE">DONE</span> xdp-tutorial: rebase libbpf to get AF_XDP headers</a></li>
<li><a href="#xdp-tutorial--Add-initial-AF_XDP-tutorial-example"><span class="done DONE">DONE</span> xdp-tutorial: Add initial AF_XDP tutorial example</a></li>
<li><a href="#xdp-tutorial--Work-on-AF_XDP-tutorial-example"><span class="todo TODO">TODO</span> xdp-tutorial: Work on AF_XDP tutorial example</a></li>
<li><a href="#Example-of-how-to-use-tail-calls"><span class="todo TODO">TODO</span> Example of how to use tail calls</a></li>
<li><a href="#xdp-tutorial--Split-packet-parsing-between-two-XDP-programs"><span class="todo TODO">TODO</span> xdp-tutorial: Split packet parsing between two XDP programs</a>
<ul>
<li><a href="#xdp-tutorial--Extend-to-HW-offload--Split-packet-parsing-between-two-XDP-programs"><span class="todo TODO">TODO</span> xdp-tutorial: Extend to HW-offload: Split packet parsing between two XDP programs</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#xdp-tutorial-for-tracepoints-project"><span class="todo TODO">TODO</span> xdp-tutorial for tracepoints project</a>
<ul>
<li><a href="#xdp-tutorial--add-tracepoint-examples-for-reading-XDP-tracepoints"><span class="done DONE">DONE</span> xdp-tutorial: add tracepoint examples for reading XDP tracepoints</a></li>
<li><a href="#xdp-tutorial--relate-tracing-to-other-assignments"><span class="done DONE">DONE</span> xdp-tutorial: relate tracing to other assignments</a></li>
<li><a href="#xdp-tutorial--fix-bugs-for-raw_tracepoints"><span class="done DONE">DONE</span> xdp-tutorial: fix bugs for raw_tracepoints</a></li>
</ul>
</li>
<li><a href="#xdp-tutorial--selftests-project"><span class="todo TODO">TODO</span> xdp-tutorial: selftests project</a></li>
<li><a href="#Solution-for-basic04"><span class="todo TODO">TODO</span> Solution for basic04</a></li>
</ul>
</li>
<li><a href="#Longer-term-preliminary-plans">Longer-term preliminary plans&#xa0;&#xa0;&#xa0;<span class="tag"><span class="_long">@long</span></span></a>
<ul>
<li><a href="#XDP-tutorial-misc-assignments"><span class="todo TODO">TODO</span> XDP-tutorial misc assignments</a>
<ul>
<li><a href="#XDP-tutorial--Code-xdp_stats-to-use-follow-XDP-bpf-id-to-maps"><span class="todo TODO">TODO</span> XDP-tutorial: Code xdp_stats to use/follow XDP bpf-id to maps</a></li>
<li><a href="#XDP-tutorial--drawing-and-desc-of-veth-testlab"><span class="todo TODO">TODO</span> XDP-tutorial: drawing and desc of veth-testlab</a></li>
<li><a href="#Best-practices-for-using-multiple-programs-on-the-same-interface"><span class="todo TODO">TODO</span> Best practices for using multiple programs on the same interface</a></li>
<li><a href="#Tutorial-for-debugging-and-introspection"><span class="todo TODO">TODO</span> Tutorial for debugging and introspection</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Site-navigation">Site navigation</a></li>
</ul>
</div>
</div>
<p>
This document contains <b>org-mode tasks</b> and TODOs for <a href="https://github.com/xdp-project/xdp-tutorial/">XDP-tutorial</a>.
It is recommended to use emacs when viewing and editing these <code>.org</code> files,
as the github rendering view removes the <code>TODO</code> and <code>DONE</code> marking on the
tasks.
</p>

<p>
The XDP-tutorial is more than a tutorial. We want to evolve this to become a
resource for XDP/BPF developer to learn good programming practices. This
also means aspiring to high code quality, and show good practise for error
handling, and show how code are placed into common/ directory files/objects.
</p>

<p>
Top-level headings indicate category, as explained in <a href="../xdp-project.html">../xdp-project.html</a>.
</p>


<div id="outline-container-Important-medium-term-tasks" class="outline-2">
<h2 id="Important-medium-term-tasks"><a href="#Important-medium-term-tasks">Important medium-term tasks&#xa0;&#xa0;&#xa0;<span class="tag"><span class="_medium">@medium</span></span></a></h2>
<div class="outline-text-2" id="text-Important-medium-term-tasks">
</div>
<div id="outline-container-XDP-tutorial-ideas-for-assignments-examples" class="outline-3">
<h3 id="XDP-tutorial-ideas-for-assignments-examples"><a href="#XDP-tutorial-ideas-for-assignments-examples"><span class="todo TODO">TODO</span> XDP-tutorial ideas for assignments/examples</a></h3>
<div class="outline-text-3" id="text-XDP-tutorial-ideas-for-assignments-examples">
</div>
<div id="outline-container-xdp-tutorial--rebase-libbpf-to-get-AF_XDP-headers" class="outline-4">
<h4 id="xdp-tutorial--rebase-libbpf-to-get-AF_XDP-headers"><a href="#xdp-tutorial--rebase-libbpf-to-get-AF_XDP-headers"><span class="done DONE">DONE</span> xdp-tutorial: rebase libbpf to get AF_XDP headers</a></h4>
<div class="outline-text-4" id="text-xdp-tutorial--rebase-libbpf-to-get-AF_XDP-headers">
<p>
Updated to the latest github libbpf commit 910c475f09e5 ("sync: latest
libbpf changes from kernel") details see:
<a href="https://github.com/xdp-project/xdp-tutorial/commit/45963bee3a5a6540">https://github.com/xdp-project/xdp-tutorial/commit/45963bee3a5a6540</a>
</p>
</div>
</div>

<div id="outline-container-xdp-tutorial--Add-initial-AF_XDP-tutorial-example" class="outline-4">
<h4 id="xdp-tutorial--Add-initial-AF_XDP-tutorial-example"><a href="#xdp-tutorial--Add-initial-AF_XDP-tutorial-example"><span class="done DONE">DONE</span> xdp-tutorial: Add initial AF_XDP tutorial example</a></h4>
<div class="outline-text-4" id="text-xdp-tutorial--Add-initial-AF_XDP-tutorial-example">
<p>
Initial step PR: <a href="https://github.com/xdp-project/xdp-tutorial/pull/35">https://github.com/xdp-project/xdp-tutorial/pull/35</a>
</p>
</div>
</div>

<div id="outline-container-xdp-tutorial--Work-on-AF_XDP-tutorial-example" class="outline-4">
<h4 id="xdp-tutorial--Work-on-AF_XDP-tutorial-example"><a href="#xdp-tutorial--Work-on-AF_XDP-tutorial-example"><span class="todo TODO">TODO</span> xdp-tutorial: Work on AF_XDP tutorial example</a></h4>
<div class="outline-text-4" id="text-xdp-tutorial--Work-on-AF_XDP-tutorial-example">
<p>
The <a href="https://github.com/xdp-project/xdp-tutorial/tree/master/advanced03-AF_XDP">advanced03-AF_XDP</a> lesson needs more work.
</p>
</div>
</div>

<div id="outline-container-Example-of-how-to-use-tail-calls" class="outline-4">
<h4 id="Example-of-how-to-use-tail-calls"><a href="#Example-of-how-to-use-tail-calls"><span class="todo TODO">TODO</span> Example of how to use tail calls</a></h4>
</div>

<div id="outline-container-xdp-tutorial--Split-packet-parsing-between-two-XDP-programs" class="outline-4">
<h4 id="xdp-tutorial--Split-packet-parsing-between-two-XDP-programs"><a href="#xdp-tutorial--Split-packet-parsing-between-two-XDP-programs"><span class="todo TODO">TODO</span> xdp-tutorial: Split packet parsing between two XDP programs</a></h4>
<div class="outline-text-4" id="text-xdp-tutorial--Split-packet-parsing-between-two-XDP-programs">
<p>
This exercise/lesson is also meant to show how XDP hardware offloading can
interact with regular XDP programs (software mode running driver level).
</p>

<p>
The assignment is to create two XDP programs. The first XDP-prog does packet
header parsing, and stores parse information in metadata area (located just
before payload) and BPF tail-calls into the second XDP-prog. The second
XDP-prog reads info from metadata area, and acts on parse-info, e.g. shows
it can read part of the packet, without doing parsing. The tricky part of
the second XDP-prog is how to ensure the verifier is able to perform its
static analysis and prove the program is safe(?).
</p>

<p>
As part of the assignment, it would be relevant to use BTF for giving the
metadata area structure.
</p>
</div>

<div id="outline-container-xdp-tutorial--Extend-to-HW-offload--Split-packet-parsing-between-two-XDP-programs" class="outline-5">
<h5 id="xdp-tutorial--Extend-to-HW-offload--Split-packet-parsing-between-two-XDP-programs"><a href="#xdp-tutorial--Extend-to-HW-offload--Split-packet-parsing-between-two-XDP-programs"><span class="todo TODO">TODO</span> xdp-tutorial: Extend to HW-offload: Split packet parsing between two XDP programs</a></h5>
<div class="outline-text-5" id="text-xdp-tutorial--Extend-to-HW-offload--Split-packet-parsing-between-two-XDP-programs">
<p>
When above assignment is complete. Then extend to HW-offload the first
XDP-prog that does the parsing and storing in metadata area. It doesn't BPF
tail-call the second XDP-prog, instead it loads the second XDP-prog in
regular XDP driver hook.
</p>

<p>
This will demonstrate how to HW-offload packet header parse information via
metadata area.
</p>

<p>
BTF considerations, how can we transfer BTF info from HW-offloaded XDP-prog?
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-xdp-tutorial-for-tracepoints-project" class="outline-3">
<h3 id="xdp-tutorial-for-tracepoints-project"><a href="#xdp-tutorial-for-tracepoints-project"><span class="todo TODO">TODO</span> xdp-tutorial for tracepoints project</a></h3>
<div class="outline-text-3" id="text-xdp-tutorial-for-tracepoints-project">
<p>
Tutorial sub-project for teaching people about using tracepoints.
</p>

<p>
The XDP angle is that infra depend on some tracepoints for stats, debugging
and troubleshooting XDP. E.g. see the kernel/samples/bpf program xdp_monitor
(<a href="https://github.com/torvalds/linux/blob/master/samples/bpf/xdp_monitor_kern.c">xdp_monitor_kern.c</a> and <a href="https://github.com/torvalds/linux/blob/master/samples/bpf/xdp_monitor_user.c">xdp_monitor_user.c</a>). But the issue is that
xdp_monitor (and other trace samples) use another ELF loader than libbpf
(the samples local <a href="https://github.com/torvalds/linux/blob/master/samples/bpf/bpf_load.c">bpf_load.c</a>), which we want to move people way from.
</p>
</div>

<div id="outline-container-xdp-tutorial--add-tracepoint-examples-for-reading-XDP-tracepoints" class="outline-4">
<h4 id="xdp-tutorial--add-tracepoint-examples-for-reading-XDP-tracepoints"><a href="#xdp-tutorial--add-tracepoint-examples-for-reading-XDP-tracepoints"><span class="done DONE">DONE</span> xdp-tutorial: add tracepoint examples for reading XDP tracepoints</a></h4>
<div class="outline-text-4" id="text-xdp-tutorial--add-tracepoint-examples-for-reading-XDP-tracepoints">
<p>
(This was merged as part of <a href="https://github.com/xdp-project/xdp-tutorial/pull/42">PR#42</a>)
</p>

<p>
Work in progress by Jiri Olsa:
<a href="https://github.com/olsajiri/xdp-tutorial/tree/tracing">https://github.com/olsajiri/xdp-tutorial/tree/tracing</a>
</p>

<p>
Tutorial already covers load BPF programs, but attaching to tracepoints need
to be covered by tutorial. Attaching to tracepoints is a multi-step process,
that involves reading an id from debugfs, using sys_perf_event_open, and
calling some <code>ioctl()</code> events.
</p>

<p>
Ultimately we should consider adding to libbpf, tracepoint attach helper
functions, to hide these multi-step attach steps. For the purpose of the
tutorial we can demonstrate the steps, and have several tracing0x
assignments that abstract and generalise this.  Notice functions that we
consider upstreaming to libbpf are placed in <a href="https://github.com/xdp-project/xdp-tutorial/blob/master/common/common_libbpf.c">common/common_libbpf.c</a>.
</p>

<p>
Another consideration: We should promote using raw_tracepoints for BPF as it
have much less overhead for getting info that BPF need.
</p>
</div>
</div>

<div id="outline-container-xdp-tutorial--relate-tracing-to-other-assignments" class="outline-4">
<h4 id="xdp-tutorial--relate-tracing-to-other-assignments"><a href="#xdp-tutorial--relate-tracing-to-other-assignments"><span class="done DONE">DONE</span> xdp-tutorial: relate tracing to other assignments</a></h4>
<div class="outline-text-4" id="text-xdp-tutorial--relate-tracing-to-other-assignments">
<p>
(This was merged as part of <a href="https://github.com/xdp-project/xdp-tutorial/pull/42">PR#42</a>)
</p>

<p>
When building up tracing assignments relate this to other parts of tutorial.
</p>

<p>
We can already relate this to other assignments. The assignment <a href="https://github.com/xdp-project/xdp-tutorial/tree/master/basic02-prog-by-name#assignment-2-add-xdp_abort-program">basic02</a> show
how to use perf record + script with tracepoint event <code>xdp:xdp_exception</code>.
And basic04 program have a "xdp_abort" section program, that can trigger
this tracepoint.
</p>
</div>
</div>

<div id="outline-container-xdp-tutorial--fix-bugs-for-raw_tracepoints" class="outline-4">
<h4 id="xdp-tutorial--fix-bugs-for-raw_tracepoints"><a href="#xdp-tutorial--fix-bugs-for-raw_tracepoints"><span class="done DONE">DONE</span> xdp-tutorial: fix bugs for raw_tracepoints</a></h4>
<div class="outline-text-4" id="text-xdp-tutorial--fix-bugs-for-raw_tracepoints">
<p>
The <a href="https://github.com/xdp-project/xdp-tutorial/pull/42">PR#42</a> contained some bugs for <a href="https://github.com/xdp-project/xdp-tutorial/tree/master/tracing02-xdp-monitor">tracing02-xdp-monitor</a>.
The bug is tracked by <a href="https://github.com/xdp-project/xdp-tutorial/issues/48">issue#48</a>.
</p>

<p>
Deadline: This must be fixed before talk at <a href="https://bornhack.dk/bornhack-2019/program/#/event/xdp-hands-on-tutorial">Bornhack</a>.
</p>
</div>
</div>
</div>

<div id="outline-container-xdp-tutorial--selftests-project" class="outline-3">
<h3 id="xdp-tutorial--selftests-project"><a href="#xdp-tutorial--selftests-project"><span class="todo TODO">TODO</span> xdp-tutorial: selftests project</a></h3>
<div class="outline-text-3" id="text-xdp-tutorial--selftests-project">
<p>
We would like to have a system that (integrated with Makefile) that can run
a selftest per assignment directory.
</p>
</div>
</div>


<div id="outline-container-Solution-for-basic04" class="outline-3">
<h3 id="Solution-for-basic04"><a href="#Solution-for-basic04"><span class="todo TODO">TODO</span> Solution for basic04</a></h3>
<div class="outline-text-3" id="text-Solution-for-basic04">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2019-06-04 Tue 14:52]</span></span>
<a href="https://github.com/xdp-project/xdp-tutorial/issues/46">[xdp-project/xdp-tutorial] A solution for basic04 would be helpful (#46)</a>
</p>
</div>
</div>
</div>
<div id="outline-container-Longer-term-preliminary-plans" class="outline-2">
<h2 id="Longer-term-preliminary-plans"><a href="#Longer-term-preliminary-plans">Longer-term preliminary plans&#xa0;&#xa0;&#xa0;<span class="tag"><span class="_long">@long</span></span></a></h2>
<div class="outline-text-2" id="text-Longer-term-preliminary-plans">
</div>
<div id="outline-container-XDP-tutorial-misc-assignments" class="outline-3">
<h3 id="XDP-tutorial-misc-assignments"><a href="#XDP-tutorial-misc-assignments"><span class="todo TODO">TODO</span> XDP-tutorial misc assignments</a></h3>
<div class="outline-text-3" id="text-XDP-tutorial-misc-assignments">
</div>
<div id="outline-container-XDP-tutorial--Code-xdp_stats-to-use-follow-XDP-bpf-id-to-maps" class="outline-4">
<h4 id="XDP-tutorial--Code-xdp_stats-to-use-follow-XDP-bpf-id-to-maps"><a href="#XDP-tutorial--Code-xdp_stats-to-use-follow-XDP-bpf-id-to-maps"><span class="todo TODO">TODO</span> XDP-tutorial: Code xdp_stats to use/follow XDP bpf-id to maps</a></h4>
<div class="outline-text-4" id="text-XDP-tutorial--Code-xdp_stats-to-use-follow-XDP-bpf-id-to-maps">
<p>
Update basic04 xdp_stats via XDP-id
</p>
</div>
</div>

<div id="outline-container-XDP-tutorial--drawing-and-desc-of-veth-testlab" class="outline-4">
<h4 id="XDP-tutorial--drawing-and-desc-of-veth-testlab"><a href="#XDP-tutorial--drawing-and-desc-of-veth-testlab"><span class="todo TODO">TODO</span> XDP-tutorial: drawing and desc of veth-testlab</a></h4>
</div>
<div id="outline-container-Best-practices-for-using-multiple-programs-on-the-same-interface" class="outline-4">
<h4 id="Best-practices-for-using-multiple-programs-on-the-same-interface"><a href="#Best-practices-for-using-multiple-programs-on-the-same-interface"><span class="todo TODO">TODO</span> Best practices for using multiple programs on the same interface</a></h4>
</div>

<div id="outline-container-Tutorial-for-debugging-and-introspection" class="outline-4">
<h4 id="Tutorial-for-debugging-and-introspection"><a href="#Tutorial-for-debugging-and-introspection"><span class="todo TODO">TODO</span> Tutorial for debugging and introspection</a></h4>
<div class="outline-text-4" id="text-Tutorial-for-debugging-and-introspection">
<p>
Things like
</p>

<ul class="org-ul">
<li>Drop monitor (when that lands)</li>
<li>How to monitor what a running eBPF program is doing</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-Site-navigation" class="outline-2">
<h2 id="Site-navigation"><a href="#Site-navigation">Site navigation</a></h2>
<div class="outline-text-2" id="text-Site-navigation">
<p>
The repository contains a number of files that track more specific areas of XDP
development. These are included in the following list:
</p>
<ul class="org-ul">
<li><a href="../index.html">Top-level XDP project management</a></li>

<li><a href="../brainstorm.html">Brainstorm notes</a></li>
<li><a href="../conference.html">Conference planning document</a></li>
<li><a href="../people.html">People involved in XDP development</a></li>
<li><a href="../planning.html">Project management: Planning who is working on what</a></li>
<li><a href="../student-projects.html">XDP-related project ideas for students</a></li>
<li>areas
<ul class="org-ul">
<li><a href="xdp_flowcache.html">Brainstorming around XDP-accelerated flowcache</a></li>
<li><a href="cpumap.html">Project management for CPUMAP</a></li>
<li><a href="ovs.html">Project management for XDP and Open vSwitch integration</a></li>
<li><a href="drivers.html">Project management for XDP driver support</a></li>
<li><a href="xdp-tutorial.html">Project management for XDP-tutorial</a></li>
<li><a href="mem.html">Project management for areas/mem</a></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2020-05-22 Fri 13:47</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
